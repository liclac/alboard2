{% extends 'base.html' %}
{% load markdown_deux_tags i18n %}
{% block title %}{% trans "Picture" %} | {{ object.pool.name }}{% endblock %}
{% block body_class %}has-bottom-bar{% endblock %}
{% block content %}
	<div class="col-xs-12">
		<a class="thumbnail">
			<img src="{{ object.image.url }}" />
			<div class="caption clearfix">
				<div class="description">
					{{ object.description|markdown|default:"<p></p>" }}
				</div>
				<div class="meta small">
					<span class="pull-left"><i class="glyphicon glyphicon-time"></i> {{ object.created_at }}</span>
					<span class="pull-right"><i class="glyphicon glyphicon-user"></i> {{ object.signature|default:_("Anonymous") }}</span>
				</div>
			</div>
		</a>
	</div>
	<nav class="navbar navbar-fixed-bottom navbar-default navbar-justified">
		<ul class="nav navbar-nav">
			{% with object.prev_post as p %}
				<li class="prev-button {% if not p %}disabled{% endif %}">
					<a {% if p %}href="{% url 'post' p.pool.id p.id %}"{% endif %} id="go-prev"><span aria-hidden="true">&larr;</span>&nbsp;{% trans "Previous" %}</a>
				</li>
			{% endwith %}
			
			<li><a href="{% url 'pool' object.pool.id %}">{{ object.pool.name }}</a></li>
			
			{% with object.next_post as p %}
				<li class="next-button {% if not p %}disabled{% endif %}">
					<a {% if p %}href="{% url 'post' p.pool.id p.id %}"{% endif %} id="go-next">{% trans "Next" %}&nbsp;<span aria-hidden="true">&rarr;</span></a>
				</li>
			{% endwith %}
		</ul>
	</nav>
{% endblock %}
{% block after_body %}
	<script>
		$(document).keydown(function(e) {
			// Ignore presses with modifiers; we don't want to interfere with
			// tab cycling or the like - only lone arrow key presses
			if(e.altKey || e.ctrlKey || e.metaKey || e.shiftKey)
				return;
			else if(e.which == 37 || e.which == 65) // Arrow Left, A
				$('#go-prev')[0].click();
			else if(e.which == 39 || e.which == 68) // Arrow Right, D
				$('#go-next')[0].click();
			else if(e.which == 87 || e.which == 75) // W, K
				window.scrollBy(0, -50);
			else if(e.which == 83 || e.which == 74) // S, J
				window.scrollBy(0, 50);
			else
				return;
			e.preventDefault();
		});
	</script>
{% endblock %}
